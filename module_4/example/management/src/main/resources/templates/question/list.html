<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <script src="https://kit.fontawesome.com/0d73d0f6f0.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.1.0/css/v4-shims.min.css"
          integrity="sha512-p++g4gkFY8DBqLItjIfuKJPFvTPqcg2FzOns2BNaltwoCOrXMqRIOqgWqWEvuqsj/3aVdgoEo2Y7X6SomTfUPA=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>

    <!-- Required meta tags -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.1.0/css/v4-shims.min.css"
          integrity="sha512-p++g4gkFY8DBqLItjIfuKJPFvTPqcg2FzOns2BNaltwoCOrXMqRIOqgWqWEvuqsj/3aVdgoEo2Y7X6SomTfUPA=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
          rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
          crossorigin="anonymous">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" href="image/favicon.png" type="image/png">
    <title>Royal Hotel</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="vendors/linericon/style.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="vendors/owl-carousel/owl.carousel.min.css">
    <link rel="stylesheet" href="vendors/bootstrap-datepicker/bootstrap-datetimepicker.min.css">
    <link rel="stylesheet" href="vendors/nice-select/css/nice-select.css">
    <link rel="stylesheet" href="vendors/owl-carousel/owl.carousel.min.css">
    <!-- main css -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>

<body>

<nav class="navbar navbar-expand-lg navbar-light bg-warning">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo03"
            aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="#">Navbar</a>

    <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
        <ul class="nav navbar-nav menu_nav ml-auto">
            <li class="nav-item active"><a class="nav-link" href="#">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="#">About us</a></li>
            <li class="nav-item"><a class="nav-link" href="#">Accomodation</a></li>
            <li class="nav-item"><a class="nav-link" href="#">Gallery</a></li>
            <li class="nav-item submenu dropdown">
                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                   aria-expanded="false">Selector</a>
                <ul class="dropdown-menu">
                    <li class="nav-item"><a class="nav-link" href="/customer">Customer</a></li>
                    <li class="nav-item"><a class="nav-link" href="/employee">Employee</a></li>
                    <li class="nav-item"><a class="nav-link" href="/contract">Contract</a></li>
                    <li class="nav-item"><a class="nav-link" href="/service">Service</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Home</a></li>
                </ul>
            </li>
            <li class="nav-item"><a class="nav-link" href="#">Elemests</a></li>
            <li class="nav-item"><a class="nav-link" href="#">Contact</a></li>
        </ul>
    </div>
</nav>



<p>
    <a th:href="@{/book/create}" style="text-decoration: none" class="btn-info">Add new book</a>
</p>


<div class="container-fluid">

    <div class="row">
        <div class="row">
            <form action="#" th:action="@{/book/search}" method="get">
                <div class="row">
                    <div class="col-1">
                         <span class="col-1">
                        <button class="btn btn-outline-success my-2 my-sm-0" id="search">Search</button>
                    </span>
                    </div>
                   <div class="col-3">
                       <input class="form-control " type="search" placeholder="Search title" aria-label="Search"
                              name="title">
                   </div>
                    <div class="col-3">
                        <input class="form-control" type="search" placeholder="Search book " aria-label="Search"
                               name="book">
                    </div>

                </div>
              <div class="row">


              </div>

<!--                <div class="col-2">-->
<!--                    <select name="code">-->
<!--                        <option th:value="K">-->
<!--                            KH-0001-->
<!--                        </option>-->

<!--                        <option th:value="K" >-->
<!--                            KH-0002-->
<!--                        </option>-->
<!--                    </select>-->
<!--                </div>-->

            </form>
        </div>
    </div>

    <div class="row">
        <div class="col-2">
            <button class="btn btn-outline-success my-2 my-sm-0" id="sort">
                <a th:href="@{/book/sort}">Sort</a>
            </button>
        </div>
    </div>

    <div class="row">
        <table class="table table-striped w-50 mx-auto">
            <thead class="thead-inverse">
            <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Question</th>
                <th>Date create</th>
                <th>Status</th>
                <th>Question Type</th>

            </tr>
            </thead>
            <tbody>


            <tr th:each="book,rowstat : ${bookList}">
                <td th:text="${book.id}"></td>
                <td th:text="${book.title}"></td>
                <td th:text="${book.questions}"></td>
                <td th:text="${book.dateCreate}"></td>
                <td th:text="${book.status}"></td>
                <td th:text="${book.bookType.name}"></td>
                <td>
                    <button type="button" class="btn btn-light">
                        <a th:href="@{/book/edit_param/(id = ${book.id})}">Edit</a>
                    </button>

                </td>
                <td>
                    <button type="button" class="btn btn-danger btn-delete" data-toggle="modal"
                            data-target="#deleteModal" th:data-id123="${book.id}" th:data-title="${book.title}">
                        Delete
                    </button>
                </td>
                <td>
                    <button type="button" class="btn btn-light btn-view" data-toggle="modal"

                            data-target="#viewModal"
                            th:data-id123="${book.id}"
                            th:data-title="${book.title}"
                            th:data-books="${book.books}"
                            th:data-datecreate="${book.dateCreate}"
                            th:data-status="${book.status}"
                            th:data-questiontype="${book.bookType.name}">View
                    </button>

                </td>
<!--                <td><a th:href="@{/book/{id}/view(id=${book.getId()})}"><i class="fas fa-binoculars">View</i></a></td>-->


            </tr>

            </tbody>

        </table>

        <!-- Modal delete-->
        <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>Bạn có muốn xoá câu hỏi <span id="name-delete" class="text-danger"></span></p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <a id="link-delete" class="btn btn-danger" href="">Delete</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal view-->
        <div class="modal fade" id="viewModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Modal title</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>book: <span id="title-view" class="text-danger"></span></p>

                        <p>Id: <span id="id-view" class="text-danger"></span></p>
                        <p>Title: <span id="title-view-table" class="text-danger"></span></p>
                        <p>book<span id="book-view" class="text-danger"></span></p>
                        <p>dateCreate<span id="date-create-view" class="text-danger"></span></p>
                        <p>status<span id="status-view" class="text-danger"></span></p>
                        <p>bookType<span id="bookType-view" class="text-danger"></span></p>

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <a id="link-view" href="" style="text-decoration: none"></a>
                    </div>
                </div>
            </div>
        </div>


        <span>
    <a th:if="${bookList.hasPrevious()}" th:href="@{/book/(page = ${bookList.number - 1})}">
        Previous
    </a>
     <span>
        <span th:each="pageNo: ${#numbers.sequence(0,bookList.totalPages - 1)}">
            <a th:href="@{/book/(page = ${pageNo})}" th:text="${pageNo}"></a>
        </span>
    </span>
     <a th:if="${bookList.hasNext()}" th:href="@{/book/(page = ${bookList.number + 1})}">
        Next
    </a>

        </span>
    </div>
    <br>
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12 bg-black">
                <br>
                <p class="text-light fs-6">Features and app availability may vary by region.</p>
            </div>
        </div>
    </div>
</div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


<script>
    $(document).ready(function () {
        $(".btn-delete").click(function () {
            let id = this.dataset.id123;
            let name = this.dataset.title;
            $('#name-delete').html(name);
            $('#link-delete').attr("href", "http://localhost:8080/book/delete?id=" + id);

        });


        $(".btn-view").click(function () {
            let id = this.dataset.id123;
            $('#id-view').html(id);

            let title = this.dataset.title;
            $('#title-view').html(title);

            let titleTable = this.dataset.title;
            $('#title-view-table').html(titleTable);


            let book = this.dataset.books;
            $('#book-view').html(book);

            let date = this.dataset.datecreate;
            $('#date-create-view').html(date);

            let status = this.dataset.status;
            $('#status-view').html(status);

            let bookType = this.dataset.questiontype;
            $('#bookType-view').html(bookType);

            $('#link-view').attr("href", "http://localhost:8080/book/view?id=" + id);

        });

    });
</script>

</body>
</html>